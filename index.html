<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="img/flowers.png" type="image/x-icon">
    <title>FLORES</title>
</head>
<body class="container">
    <!-- Reproductor de audio -->
    <audio id="audio" loop muted>
        <source src="img/Floricienta.mp3" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio.
    </audio>

    <!-- Contenido de la página principal -->
    <div class="greetings">
        <span>R</span>
        <span>A</span>
        <span>U</span>
        <span>R</span>
    </div>
    <div class="greetings">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
    </div>
    <div class="description">
        <span>Esto es para ti</span>
    </div>
    <div class="button">
        <button>
            <a href="FLORES.html" id="audio-link">Haga Clic</a>
        </button>
    </div>

    <!-- Script para manejar la reproducción del audio -->
    <script>
        const audio = document.getElementById("audio");

        // Reproducir el audio con sonido después de la interacción del usuario
        document.addEventListener("click", () => {
            if (audio.paused) { // Verificar si el audio está pausado
                audio.muted = false; // Habilitar el sonido
                audio.play() // Reproducir el audio
                    .then(() => console.log("Audio reproducido"))
                    .catch((error) => console.error("Error al reproducir el audio:", error));
            }
        });

        // Opcional: Mostrar un mensaje para que el usuario haga clic
        const clickMessage = document.createElement("div");
        clickMessage.textContent = "Haz clic en cualquier parte para activar el sonido";
        clickMessage.style.position = "fixed";
        clickMessage.style.bottom = "20px";
        clickMessage.style.left = "50%";
        clickMessage.style.transform = "translateX(-50%)";
        clickMessage.style.color = "yellow";
        clickMessage.style.fontSize = "1.2rem";
        document.body.appendChild(clickMessage);

        // Eliminar el mensaje después de hacer clic
        document.addEventListener("click", () => {
            clickMessage.remove();
        }, { once: true });

        // Guardar el estado del audio en localStorage antes de redirigir
        const audioLink = document.getElementById("audio-link");
        audioLink.addEventListener("click", (event) => {
            event.preventDefault(); // Prevenir la navegación inmediata
            localStorage.setItem("audioPlaying", "true");
            localStorage.setItem("audioTime", audio.currentTime);
            window.location.href = audioLink.href; // Redirigir a FLORES.html
        });
    </script>
</body>
</html>
